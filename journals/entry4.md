## React Pomodoro Journal Entry 4

### Getting the Timer to Restart with a Button Click:

The next task I sought to work on was getting the timer to restart. In my Vue version of this project, I had a separate button that I used that would restart the timer. For this React version, I wanted to essentially use the same button I have rendered on the screen rather than making a new instance of the button. Like I mentioned in the previous journal, I could get the button to change the timer’s status by passing in a value and the handleTimerStatus function. It is also at this point in coding the project where I decided to create a state variable in Background that would act as the text for the button. When handleTimerStatus is called, it changes the value of buttonText depending on what the button should display for the timer’s particular state.

The issue I ran into with trying to use the button to stop the timer was that I had no way to indicate to the timer that it needed to be reset. I tried to solve this by creating another state variable in Background called isReset that would be passed to PomodoroTimer as a prop to indicate on a true value that the timer should reset. I also created a condition within the Timer function of PomodoroTimer that would look for this condition. The main issue I ran into here was that the Timer function would not recognize when the isReset was changed to true. The reason why it didn’t recognize this change was because the function was only called on the instance in which timerStart was true, which like I mentioned last time was only true for a very short time.

The fix that I ended up coming up with (which I should have figured out ahead of working on the reset functionality) was that I needed to get rid of that extra Timer function altogether. Instead of having the Timer function, I would put the code for the function inside the useEffect method. I would then set the interval when timerStart was true. By implementing it this way, I didn’t need to set timerStart back to false right away because the useEffect method and the setInterval only called once when it saw that timerStart was true. Another interesting side effect of implementing the timer this way was that I didn’t need to create a condition to check for a reset. When the reset button is clicked, it changes the status of the timer. The only thing I needed to do was pass in a new value for the time when changing the timer status and change the value of timerStart to false. This effectively stopped the current timer and gave it a new value waiting to be started. (Just to note: I ended up creating another state variable in Background called time that would pass the time in seconds to PomodoroTimer as props. The handleTimerStatus function would set this value based on if the timer was going to be started or if a break was going to be started. I also needed to set the timer to 0 in the stopped case but I will discuss that later.)

### Getting the timer to recognize Start vs Break timer:

Note: I ended up finishing this part before I finished the reset functionality. However, I started working on the Restart first, and when I got a bit stuck, I switched to working on this functionality.

Part of a Pomodoro Timer’s functionality is essentially having two timers that are separated by a stopped period and continue to cycle from the two timers. The two timers are when you are supposed to be working and when you are supposed to be taking a break. For the sake of my project, I called the instance of when you are supposed to be working, started and the instance of taking a break, break. In order to have the program distinguish when a start timer should be active vs when a break active should be active, I needed to create another Boolean state variable to distinguish this. I ended up calling that variable shouldStart (I ended up renaming to repeatTimer as it better represents what should happen when true). I have a condition within the handleTimerStatus’ case for 3 (the stopped status) that checks whether this value is true or not. If it is true, then it sets the statusValue to 1 (for start status) and the buttonText to ‘Start’. When false, it sets statusValue to 2 (for break status) and buttonText to ‘Break’.

One issue I ran into when implementing the timer this way was that I changed the value of shouldStart within these conditions, and didn’t change it in the other cases. What ended up happening was that when the timer would stop, it kept switching from stopped to start back to stop then back to break and back to stop. The fix was to remove the shouldStart from case 3 and just ensure that I change shouldStart in the other cases of handleTimerStatus.

Another thing I had to deal with was that I had some issues with getting the timer to stop. The timer would still count down past 0 even though I had the condition for the interval to clear. The fix I ended up coming up with was to have the handleTimerStatus case for 3 (which is called when the timer reaches 0 to indicate the stop status) set the time for the PomodoroTimer to 0 so that the timer would display 0 instead of resetting to the start time or counting lower, and I also needed to set timerStart to false when the timer was supposed to stop to ensure that the condition would allow the interval to clear.

### Conclusion:

After getting the timer reset and the overall timer functionality to switch between start and break, the project is pretty much now complete. There are always additions that could be made, but this was what I had set out to build. It was definitely interesting implementing this project in two separate frameworks. There were certain things that I needed to do differently, and there are definitely different ways I could have implemented this project within the frameworks alone. I will probably add some additions like testing to this project, and maybe some styling changes in the future.
